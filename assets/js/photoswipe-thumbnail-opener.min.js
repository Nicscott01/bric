var initPhotoSwipeFromDOM=function(e){function a(e,t){return e&&(t(e)?e:a(e.parentNode,t))}function t(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1;var e=e.target||e.srcElement,t=a(e,function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()});if(t){for(var n,e=t.parentNode,i=t.parentNode.childNodes,r=i.length,o=0,l=0;l<r;l++)if(1===i[l].nodeType){if(i[l]===t){n=o;break}o++}return 0<=n&&d(n,e),!1}}function d(e,t,n,i){var r=document.querySelectorAll(".pswp")[0],o=u(t),l={galleryUID:t.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var e=o[e].el.getElementsByTagName("img")[0],t=window.pageYOffset||document.documentElement.scrollTop,e=e.getBoundingClientRect();return{x:e.left,y:e.top+t,w:e.width}}};if(i)if(l.galleryPIDs){for(var a=0;a<o.length;a++)if(o[a].pid==e){l.index=a;break}}else l.index=parseInt(e,10)-1;else l.index=parseInt(e,10);isNaN(l.index)||(n&&(l.showAnimationDuration=0),new PhotoSwipe(r,PhotoSwipeUI_Default,o,l).init())}for(var u=function(e){for(var t,n,i,r=e.childNodes,o=r.length,l=[],a=0;a<o;a++)1===(t=r[a]).nodeType&&(i=(n=t.children[0]).getAttribute("data-size").split("x"),i={src:n.getAttribute("href"),w:parseInt(i[0],10),h:parseInt(i[1],10)},1<t.children.length&&(i.title=t.children[1].innerHTML),0<n.children.length&&(i.msrc=n.children[0].getAttribute("src")),i.el=t,l.push(i));return l},n=document.querySelectorAll(e),i=0,r=n.length;i<r;i++)n[i].setAttribute("data-pswp-uid",i+1),n[i].onclick=t;e=function(){var e=window.location.hash.substring(1),t={};if(!(e.length<5)){for(var n,i=e.split("&"),r=0;r<i.length;r++)i[r]&&((n=i[r].split("=")).length<2||(t[n[0]]=n[1]));t.gid&&(t.gid=parseInt(t.gid,10))}return t}();e.pid&&e.gid&&d(e.pid,n[e.gid-1],!0,!0)};initPhotoSwipeFromDOM(".gallery-photoswipe");